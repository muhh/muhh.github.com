--- 
layout: post
title: mailbloggen (mit Drupal)
created: 1082317295
---
<p>Wenn das hier durchkommt, dann funktioniert <a href="http://drupal.org">Drupals</a> <a href="http://drupal.org/project/mailhandler">mailhandler</a> Modul und ich muss mir nie mehr meine eigene Seite ansehen.<br />
<br />
<a href="blog/mailbloggen-mit-drupal">Wie funktioniert es?</a></p>

<p>
Man schicke eine Mail an mailio-äd-byzero.de, wobei im From: dieselbe
Emailadresse stehen muss, wie sie auch für den Drupaluser eingetragen
ist.</p>

<i><a href="blog/mailbloggen-mit-drupal">Weiter lesen</a></i>
<!--break-->
<p> Im restlichen Mailbody (nach einer leeren Zeile) folgt jetzt der eigentliche Blogeintrag. Es wird nur der plain/text Teil einer Mail ausgewertet, HTML Teile werden ignoriert. HTML im Eintrag ist leider im Moment auch nicht möglich.

Das Subject: ergibt den Titel für den Blogeintrag.<br />
Der Body der Email selbst ist zweigeteilt.
</p>

<p>
Zuerst der &#8220;Commands&#8221; Abschnitt. Hier können Befehle an Drupals Nodesystem übergeben werden.
Eine kleine Kurzübersicht:</p>
<pre>pass: passwort</pre>
<p>Um die Sicherheit ein wenig zu erhöhen, ist es notwendig hier das Passwort des im Absender angegebenen Accounts einzutragen.</p>

<pre>type: blog</pre>
<p>gibt den Nodetyp an. Im Moment gibt es hier nur blog.<br />
Dieser Befehl wird immer automatisch ausgeführt und ist deshalb in der Mail nicht notwendig.</p>

<pre>taxonomy: [Kategorien]</pre>
<p>Hier trägt mein ein, in welchen Kategorien (drupal: taxonomies) der Eintrag gelistet werden soll. Hier können auch mehrere durch Komma getrennte Kategorien stehen.</p>

<pre>promote: (0/1)</pre>
<p>steuert, ob der Eintrag auf der <a href="http://byzero.de">Titelseite</a> angezeigt werden soll.<br />
0 für nein und 1 für ja.<br />
Bei 0 taucht der Eintrag nur im persönlichen Blog auf, allerdings immer noch in der &#8220;Blogs&#8221; Box in der rechten Spalte.
Dieser Befehl kann nur ausgewertet werden, wenn der Benutzer speziellen Verwaltungszugriff hat. Das bin aber eigentlich nur ich.</p>

<pre>status: (0/1)</pre>
<p>setzt den &#8220;published&#8221; Parameter. 0 ergibt einen Draft, 1 veröffentlich den Eintrag und er taucht im Blog auf.</p>

<pre>comment: (0/1/2)</pre>
<p>gibt an, ob der Eintrag kommentiert werden kann. 0 für Deaktiviert, 1 für Nur-Lesen, 2 für Lesen und Schreiben.</p>
<p>
Im restlichen Mailbody (nach einer leeren Zeile) folgt jetzt der eigentliche Blogeintrag. Es wird nur der text/plain MIME-Part einer Mail ausgewertet, HTML Teile werden ignoriert. HTML im Eintrag ist leider im Moment auch nicht möglich. Vielleicht ist das die erste sinnvolle Anwendung für HTML-Mails?
</p>

<p>
Signaturen werden abgeschnitten, allerdings nur, wenn diese mit &#8220;&#8212; &#8221; eingeleitet  sind. Outlook interessiert das wieder mal bestimmt nen feuchten Dreck :-/
</p>

<p>
Die Mail, die diesen Eintrag auslösen würde, sieht dann vereinfacht so aus:
<pre>
From: Markus Heurung &lt;muhh@byzero.de&gt;
Subject: mailbloggen

pass: ***
taxonomy: [geek,technisch]
comment: 2

Wenn das hier durchkommt, dann funktioniert Drupals mailhandler Modul und
ich muss mir nie mehr meine eigene Seite ansehen.

Wie funktioniert es?

Man schicke eine Mail an mailio-äd-byzero.de, wobei im From: dieselbe
Emailadresse stehen muss, wie sie auch für den Drupaluser eingetragen
ist.

usw.
</pre>
<p>
Das ist aber noch nicht alles&#8230;
</p>

<p>
Im Header lässt sich mittels eines speziell formatierten In-Reply-To: auch die genaue &#8220;Position&#8221; des Posts angeben (geht auch mit dem Befehl nid: im Commands Abschnitt der Mail)</p>

<pre>In-Reply-To: nid=5</pre>

<p>würde zum Beispiel den Node mit der Nummer 5 editieren!<br />
Im Zusammenspiel mit der Message-Id - diese wird auch ausgewertet - ergeben sich hier geniale Möglichkeiten, wie zB. Kommentieren und Antworten auf Kommentare von Posts, wodurch man im Prinzip eine komplette Mail&lt;->WWW Schnittstelle zur Verfügung hat.</p>
<br />
<br />
Wie das allerdings genau funktioniert, muss ich erst noch selbst herausfinden&#8230;</p>
